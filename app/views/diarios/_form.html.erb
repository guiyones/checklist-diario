 
<%= form_with(model: diario, id:"diario_form", class: "contents") do |form| %>
<% if diario.errors.any? %>
<div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-md mt-3">
    <h2><%= pluralize(diario.errors.count, "error") %> prohibited this diario from being saved:</h2>

    <ul class="list-disc ml-6">
        <% diario.errors.each do |error| %>
        <li><%= error.full_message %></li>
        <% end %>
    </ul>
</div>
<% end %>

<div class="flex flex-row my-12 justify-center items-center gap-4 mb-8">
    <div>
        <%= form.label :data, class:"font-semibold" %>
        <%= form.date_field :data, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2 w-full", {"border-gray-400 focus:outline-blue-600": diario.errors[:data].none?, "border-red-400 focus:outline-red-600": diario.errors[:data].any?}] %>
    </div>
    <div>
        <%= form.label :dia_semana, class:"font-semibold" %>
        <%= form.text_field :dia_semana, class: ["block shadow-sm rounded-md border px-3 py-2 mt-2", {"border-gray-400 focus:outline-blue-600": diario.errors[:dia_semana].none?, "border-red-400 focus:outline-red-600": diario.errors[:dia_semana].any?}] %>
    </div>
</div>

<div data-controller="pontos" class="mt-6 mb-8 flex flex-col items-center">
    <!-- ðŸ”µ Placar redondo -->
    <div class="relative flex items-center justify-center w-20 h-20 rounded-full bg-gray-100 border-4 border-emerald-400 shadow-inner mb-6 transition-all duration-300" data-pontos-target="circle">
        <span class="text-xl font-bold text-emerald-600 transition-all duration-300" data-pontos-target="counter">
            0 / 3
        </span>
    </div>

    <div class="mt-5 mb-12">
        <div class="grid grid-cols-2 sm:grid-cols-3 gap-4">
            <% habits = [
      ["ðŸ’ª ExercÃ­cio", :exercicio],
      ["ðŸ“š Leitura", :leitura],
      ["ðŸ¥— AlimentaÃ§Ã£o", :alimentacao],
      ["ðŸ˜´ Maconha", :maconha],
      ["ðŸº Ãlcool", :alcool]
    ].each do |label, field| %>

            <label class="group relative flex flex-col items-center justify-center p-5 border border-gray-200 rounded-2xl cursor-pointer transition-all duration-200 hover:shadow-md hover:border-emerald-400 transition-all ease-in-out duration-200 ">
                <%= form.check_box field,  
        class: "hidden peer", 
        data: { pontos_target: "checkbox", action: "change->pontos#updateCount", habit_name: field } %>

                <span class="text-2xl mb-2 group-hover:scale-110 transition-transform duration-200">
                    <%= label.split.first %>
                </span>

                <span class="text-gray-700 font-medium text-sm text-center peer-checked:text-emerald-700 peer-checked:font-semibold ">
                    <%= label.split.drop(1).join(' ') %>
                </span>

                <svg xmlns="http://www.w3.org/2000/svg" class="absolute right-3 top-3 h-4 w-4 text-emerald-500 opacity-0 peer-checked:opacity-100 transition-opacity" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                </svg>
            </label>
            <% end %>
        </div>
    </div>

    <div class="mb-8">
        <%= form.label :observacao, "ObservaÃ§Ã£o", class: "block mb-2 font-semibold text-gray-700" %>
        <%= form.rich_textarea :observacao, class: "h-40 overflow-y-auto resize-none border border-gray-300 rounded-lg p-3" %>
    </div>

    <div class="flex justify-end mt-6">
      <%= form.submit "Salvar", class: "bg-green-500 text-white px-5 py-2 rounded-md hover:bg-green-600 transition" %>
    </div>


  <% end %>

